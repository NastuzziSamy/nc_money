<div class="transaction-list" ng-class="{loading: ctrl.loading, 'mobile-show': ctrl.show}">
  <div class="transaction-list-table" ng-show="!ctrl.loading">
      <div class="transaction-list-header">
        <div class="transaction-list-header-item">Date</div>
        <div class="transaction-list-header-item">Description</div>
        <div class="transaction-list-header-item">Destination</div>
        <div class="transaction-list-header-item">In</div>
        <div class="transaction-list-header-item">Out</div>
        <div class="transaction-list-header-item"></div>
      </div>

      <div ng-show="ctrl.account.showImportTransactionsPanel" class="transaction-list-item import-transactions-panel" ng-form name="ctrl.importTransactionsForm">
        <div class="transaction-list-item-cell transaction-list-item-date">
          <ui-select name="importTransactionsDateColumn" ng-model="ctrl.importTransactions.dateColumn" theme="select2" ng-required="true">
            <ui-select-match placeholder="Select column...">{{$select.selected.lines[0]}}</ui-select-match>
            <ui-select-choices repeat="column.id as column in ctrl.importTransactions.availableColumns">
              <small ng-bind-html="column.lines[0] | highlight: $select.search"></small>
            </ui-select-choices>
          </ui-select>
          <small ng-repeat="line in ctrl.importTransactions.availableColumns[ctrl.importTransactions.dateColumn].lines">{{line}}<br></small>
        </div>
        <div class="transaction-list-item-cell transaction-list-item-description">
          <ui-select name="importTransactionsDescriptionColumn" ng-model="ctrl.importTransactions.descriptionColumn" theme="select2" ng-required="true">
            <ui-select-match placeholder="Select column...">{{$select.selected.lines[0]}}</ui-select-match>
            <ui-select-choices repeat="column.id as column in ctrl.importTransactions.availableColumns">
              <small ng-bind-html="column.lines[0] | highlight: $select.search"></small>
            </ui-select-choices>
          </ui-select>
          <small ng-repeat="line in ctrl.importTransactions.availableColumns[ctrl.importTransactions.descriptionColumn].lines">{{line}}<br></small>
          <ui-select name="importTransactionsCommentColumn" ng-model="ctrl.importTransactions.commentColumn" theme="select2">
            <ui-select-match placeholder="Select column...">{{$select.selected.lines[0]}}</ui-select-match>
            <ui-select-choices repeat="column.id as column in ctrl.importTransactions.availableColumns">
              <small ng-bind-html="column.lines[0] | highlight: $select.search"></small>
            </ui-select-choices>
          </ui-select>
          <small ng-repeat="line in ctrl.importTransactions.availableColumns[ctrl.importTransactions.commentColumn].lines">{{line}}<br></small>
        </div>
        <div class="transaction-list-item-cell transaction-list-item-destination-account">
        </div>
        <div class="transaction-list-item-cell transaction-list-item-value">
          <ui-select name="importTransactionsInValueColumn" ng-model="ctrl.importTransactions.inValueColumn" theme="select2">
            <ui-select-match placeholder="Select column...">{{$select.selected.lines[0]}}</ui-select-match>
            <ui-select-choices repeat="column.id as column in ctrl.importTransactions.availableColumns">
              <small ng-bind-html="column.lines[0] | highlight: $select.search"></small>
            </ui-select-choices>
          </ui-select>
          <small ng-repeat="line in ctrl.importTransactions.availableColumns[ctrl.importTransactions.inValueColumn].lines">{{line}}<br></small>
        </div>
        <div class="transaction-list-item-cell transaction-list-item-value">
          <ui-select name="importTransactionsOutValueColumn" ng-model="ctrl.importTransactions.outValueColumn" theme="select2">
            <ui-select-match placeholder="Select column...">{{$select.selected.lines[0]}}</ui-select-match>
            <ui-select-choices repeat="column.id as column in ctrl.importTransactions.availableColumns">
              <small ng-bind-html="column.lines[0] | highlight: $select.search"></small>
            </ui-select-choices>
          </ui-select>
          <small ng-repeat="line in ctrl.importTransactions.availableColumns[ctrl.importTransactions.outValueColumn].lines">{{line}}<br></small>
        </div>
        <div class="transaction-list-item-cell">
          <button ng-click="ctrl.cancelImport()" class="icon-close" title="{{ctrl.t.cancel}}"></button>
          <button ng-click="ctrl.importTransactions()" class="icon-checkmark" title="{{ctrl.t.submit}}" ng-show="ctrl.importTransactionsForm.$valid"></button>
        </div>
      </div>

      <div class="transaction-list-item" ng-form name="ctrl.newTransactionForm" ng-show="!ctrl.account.showImportTransactionsPanel">
        <div class="transaction-list-item-cell">
          <input name="newTransactionDate" type="text" ng-model="ctrl.newTransaction.date" datepicker placeholder="Select a date..." ng-required="true" />
        </div>
        <div class="transaction-list-item-cell">
          <input name="newTransactionDescription" type="text" placeholder="{{ctrl.t.placeholderDescription}}" autocomplete="off" autocorrect="off" spellcheck="false"
                 ng-model="ctrl.newTransaction.description" value="" ng-required="true" />
        </div>
        <div class="transaction-list-item-cell">
          <ui-select name="newTransactionDestAccount" title="Choose an account" ng-model="ctrl.newTransaction.destAccountId" theme="select2" ng-required="true">
            <ui-select-match placeholder="Select account...">{{$select.selected.name}}</ui-select-match>
            <ui-select-choices repeat="account.id as account in ctrl.availableAccounts | filter: $select.search">
              <span ng-bind-html="account.name | highlight: $select.search"></span>
              <small ng-bind-html="account.description | highlight: $select.search"></small>
            </ui-select-choices>
          </ui-select>
        </div>
         <div class="transaction-list-item-cell">
          <input currency-input name="newTransactionInValue" type="text" placeholder="{{ctrl.t.placeholderValue}}" autocomplete="off" autocorrect="off" spellcheck="false"
                 ng-model="ctrl.newTransaction.inValue" value="" ng-required="true" />
        </div>
        <div class="transaction-list-item-cell">
          <input currency-input name="newTransactionOutValue" type="text" placeholder="{{ctrl.t.placeholderValue}}" autocomplete="off" autocorrect="off" spellcheck="false"
                 ng-model="ctrl.newTransaction.outValue" value="" ng-required="true" />
        </div>
        <div class="transaction-list-item-cell">
          <div ng-class="{'icon-loading-small': ctrl.newTransactionLoading}"></div>
          <button ng-click="ctrl.submitTransaction()" class="submitTransaction icon-add action pull-right" ng-show="ctrl.newTransactionForm.$valid && !ctrl.newTransactionLoading" />
        </div>
    </div>

    <div transaction-list-item class="transaction-list-transaction"
         ng-repeat="transaction in ctrl.transactions as filtered track by transaction.id"
         data="transaction" account="ctrl.account"
    ></div>

  </div>
</div>
